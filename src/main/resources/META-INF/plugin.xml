<idea-plugin>
    <id>no.ltj.intelligpt</id>
    <name>LTJ IntelliGPT</name>
    <version>1.0.0</version>

    <vendor email="ltj@example.com" url="https://github.com/ltj54">
        LTJ
    </vendor>

    <description><![CDATA[
        <h2>LTJ IntelliGPT</h2>
        <p>En AI-assistent for IntelliJ Community Edition.<br/>
        Genererer commit-meldinger, forklarer kode og tilbyr inline forslag.</p>
    ]]></description>

    <!-- IntelliJ Community Edition 2025.1 = build 251 -->
    <idea-version since-build="251"/>

    <!-- Required modules -->
    <depends>com.intellij.modules.platform</depends>
    <depends>com.intellij.java</depends>

    <actions>

        <!-- ðŸ” Explain code -->
        <action id="LTJ.ExplainCodeAction"
                class="no.ltj.intelligpt.actions.ExplainCodeAction"
                text="LTJ IntelliGPT â€“ Forklar kode"
                description="Forklar valgt kode med LTJ IntelliGPT"
                icon="icons/ltj_gpt.svg">
            <add-to-group group-id="EditorPopupMenu" anchor="last"/>
        </action>

        <!-- ðŸ§ª Unit test generation -->
        <action id="LTJ.GenerateUnitTestAction"
                class="no.ltj.intelligpt.actions.GenerateUnitTestAction"
                text="LTJ IntelliGPT â€“ Generer enhetstest"
                description="Generer en enhetstest basert pÃ¥ markert kode"
                icon="icons/ltj_gpt.svg">
            <add-to-group group-id="EditorPopupMenu" anchor="last"/>
        </action>

        <!-- ðŸ“ Commit message -->
        <action id="LTJ.CommitMessageAction"
                class="no.ltj.intelligpt.actions.CommitMessageAction"
                text="LTJ IntelliGPT â€“ Commitmelding"
                description="Generer commitmelding basert pÃ¥ tekst i editor"
                icon="icons/ltj_gpt.svg">
            <add-to-group group-id="EditorPopupMenu" anchor="last"/>
        </action>

        <!-- âœ¨ Inline suggestion -->
        <action id="LTJ.InlineSuggestionAction"
                class="no.ltj.intelligpt.actions.InlineSuggestionAction"
                text="LTJ IntelliGPT â€“ Inline forslag"
                description="Vis inline AI-kodeforslag"
                icon="icons/ltj_gpt.svg">
            <add-to-group group-id="EditorPopupMenu" anchor="last"/>
        </action>

        <!-- ðŸ§° Toolbar menu (dropdown) -->
        <group id="LTJ.Toolbar"
               text="LTJ IntelliGPT"
               popup="true"
               icon="icons/ltj_gpt.svg">
            <add-to-group group-id="MainToolbarRight" anchor="last"/>

            <reference ref="LTJ.ExplainCodeAction"/>
            <reference ref="LTJ.GenerateUnitTestAction"/>
            <reference ref="LTJ.CommitMessageAction"/>
            <reference ref="LTJ.InlineSuggestionAction"/>
        </group>

    </actions>

    <extensions defaultExtensionNs="com.intellij">
        <applicationService
                serviceImplementation="no.ltj.intelligpt.settings.IntelliGPTSettingsState"/>

        <applicationConfigurable id="LTJIntelliGPTSettings">
            <configurable
                    displayName="LTJ IntelliGPT"
                    instance="no.ltj.intelligpt.settings.IntelliGPTSettingsConfigurable"/>
        </applicationConfigurable>
    </extensions>

</idea-plugin>
